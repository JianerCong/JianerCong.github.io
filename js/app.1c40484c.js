(function(){"use strict";var t={7743:function(t,e,n){n(2166);var o=n(9242),s=n(3396);function a(t,e){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(n)}var i=n(89);const l={},r=(0,i.Z)(l,[["render",a]]);var d=r,c=n(2483);const u={class:"home"};function m(t,e,n,o,a,i){const l=(0,s.up)("HelloWorld");return(0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(l)])}var g=n(7139),p=n.p+"img/aTodoList-zh.5b66d982.png",h=n.p+"img/aTodoList.b42bc0cf.png";const _=t=>((0,s.dD)("data-v-241d07b4"),t=t(),(0,s.Cn)(),t),f={class:"navbar navbar-expand-lg bg-secondary navbar-dark py-3 fixed-top"},b={class:"container"},y={href:"#",class:"navbar-brand"},w={key:0,src:p,class:"py-0",style:{height:"1.9em"}},v={key:1,src:h,class:"",style:{height:"1.5em"}},k=_((()=>(0,s._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navmenu"},[(0,s._)("span",{class:"navbar-toggler-icon"})],-1))),D={class:"collapse navbar-collapse",id:"navmenu"},x={class:"navbar-nav ms-auto text-end"},z={class:"nav-item mt-2"},$={key:0,class:"bi bi-wifi"},T={key:1,class:"bi bi-wifi-off"},A={class:"nav-item mt-2"},C={class:"badge text-bg-success"},L={class:"nav-item mt-2"},S={class:"nav-item mt-2 mx-lg-2"},H={class:"nav-item mt-2 mx-lg-2"},U={class:"nav-item mt-2 mx-lg-2"},W={class:"nav-item mt-2 mx-lg-2"},O={class:"fixed-bottom"},E={class:"container"},F={class:"input-group mb-3"},N=["placeholder"],j=_((()=>(0,s._)("strong",null,"+",-1))),P=[j],V={class:"container pt-4"},B=["onClick"],G={key:0,class:"position-absolute"},I=_((()=>(0,s._)("i",{class:"bi bi-square"},null,-1))),q=[I],M={key:1,class:"position-absolute"},K=_((()=>(0,s._)("i",{class:"bi bi-check-square"},null,-1))),R=[K],Z=["onClick"],Y={key:0,style:{"min-height":"2em"}},J={key:0,class:"text-muted position-absolute"},Q={key:1,class:"position-absolute"},X=_((()=>(0,s._)("span",{class:"invisible"},"a",-1))),tt={class:"fs-6 text-muted"},et={key:1},nt={key:0,class:"text-muted position-absolute"},ot={key:1,class:"position-absolute"},st=["onClick"],at=_((()=>(0,s._)("i",{class:"bi bi-x-square-fill"},null,-1))),it=[at];function lt(t,e,n,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("nav",f,[(0,s._)("div",b,[(0,s._)("a",y,["zh"==l.lang?((0,s.wg)(),(0,s.iD)("img",w)):((0,s.wg)(),(0,s.iD)("img",v))]),k,(0,s._)("div",D,[(0,s._)("ul",x,[(0,s._)("li",z,[(0,s._)("span",{class:"badge text-bg-success",onClick:e[0]||(e[0]=(...t)=>l.testOnline&&l.testOnline(...t))},[l.online?((0,s.wg)(),(0,s.iD)("i",$)):((0,s.wg)(),(0,s.iD)("i",T))])]),(0,s.wy)((0,s._)("li",A,[(0,s.Uk)((0,g.zw)(l.d("logged_in_as"))+": ",1),(0,s._)("span",C,(0,g.zw)(l.unam),1)],512),[[o.F8,""!==l.unam]]),(0,s.wy)((0,s._)("li",L,[(0,s._)("button",{type:"button",class:"btn btn-danger my-min-width",onClick:e[1]||(e[1]=(...t)=>l.logOut&&l.logOut(...t))},"Log out")],512),[[o.F8,""!==l.unam]]),(0,s.wy)((0,s._)("li",S,[(0,s._)("button",{type:"button",class:"btn btn-success my-min-width",onClick:e[2]||(e[2]=e=>t.$router.push({path:"/login"}))},(0,g.zw)(l.d("log_in_signup")),1)],512),[[o.F8,""===l.unam]]),(0,s._)("li",H,[(0,s._)("button",{type:"button",class:"btn btn-light my-min-width",onClick:e[3]||(e[3]=(...t)=>l.nextLang&&l.nextLang(...t))},(0,g.zw)(l.d("change_lang")),1)]),(0,s._)("li",U,[(0,s._)("button",{type:"button",class:"btn btn-light my-min-width",onClick:e[4]||(e[4]=(...t)=>l.toggleLight&&l.toggleLight(...t))},(0,g.zw)(i.light?"â˜€ï¸":"ğŸŒ™"),1)]),(0,s._)("li",W,[(0,s._)("button",{type:"button",class:"btn btn-info my-min-width",onClick:e[5]||(e[5]=e=>t.$router.push({path:"/about"}))},(0,g.zw)(l.d("about")),1)])])])])]),(0,s._)("section",O,[(0,s._)("div",E,[(0,s._)("div",F,[(0,s.wy)((0,s._)("input",{onKeyup:e[6]||(e[6]=(0,o.D2)(((...t)=>l.addTodo&&l.addTodo(...t)),["enter"])),type:"text",class:"form-control h2","onUpdate:modelValue":e[7]||(e[7]=t=>i.input=t),placeholder:l.d("write_your_todo_here")},null,40,N),[[o.nr,i.input]]),(0,s.wy)((0,s._)("button",{onClick:e[8]||(e[8]=(...t)=>l.addTodo&&l.addTodo(...t)),class:"btn btn-success h2",type:"button"},P,512),[[o.F8,""!==i.input]])])])]),(0,s._)("section",null,[(0,s._)("div",V,[(0,s.Wm)(o.W3,{name:"todo-fade",tag:"div"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.todos,(([e,n])=>((0,s.wg)(),(0,s.iD)("div",{class:"row mx-3 rounded bg-secondary border lead mb-2",key:e},[(0,s._)("div",{class:"col-2 col-md-1 rounded-start",onClick:t=>l.toggleDone(e)},[(0,s.Wm)(o.uT,{name:"fade"},{default:(0,s.w5)((()=>[n.done?((0,s.wg)(),(0,s.iD)("span",M,R)):((0,s.wg)(),(0,s.iD)("span",G,q))])),_:2},1024)],8,B),(0,s._)("div",{class:"col-8 col-md-10 position-relative fs-4",onClick:n=>t.$router.push({name:"detail",params:{id:e}})},[n?.ddlString?((0,s.wg)(),(0,s.iD)("div",Y,[(0,s.Wm)(o.uT,{name:"fade"},{default:(0,s.w5)((()=>[n.done?((0,s.wg)(),(0,s.iD)("del",J,(0,g.zw)(n.name),1)):((0,s.wg)(),(0,s.iD)("span",Q,(0,g.zw)(n.name),1))])),_:2},1024),X,(0,s._)("div",tt,(0,g.zw)(l.dueString(n.dueInDays)),1)])):((0,s.wg)(),(0,s.iD)("div",et,[(0,s.Wm)(o.uT,{name:"fade"},{default:(0,s.w5)((()=>[n.done?((0,s.wg)(),(0,s.iD)("del",nt,(0,g.zw)(n.name),1)):((0,s.wg)(),(0,s.iD)("span",ot,(0,g.zw)(n.name),1))])),_:2},1024)]))],8,Z),(0,s._)("div",{class:"col-2 col-md-1 rounded-end text-center",onClick:t=>l.remove(e)},it,8,st)])))),128))])),_:1})])])])}var rt=n(6265),dt=n.n(rt);function ct(t){t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers)):t.request?console.log(t.request):console.log("Err",t.message),console.log(t.config)}var ut={name:"HelloWorld",data(){return{dict:{write_your_todo_here:{en:"Write your todo here",zh:"åœ¨è¿™é‡Œå†™ä½ è¦åšçš„äº‹"},log_in_signup:{en:"Log in / Sign up",zh:"ç™»å½• / æ³¨å†Œ"},logged_in_as:{en:"Logged in as",zh:"å½“å‰ç”¨æˆ·"},log_out:{en:"Log out",zh:"ç™»å‡º"},app_name:{en:"A Todo App",zh:"ä¸€ä¸ªåŠäº‹æ¸…å•"},about:{en:"About",zh:"å…³äº"},add:{en:"Add",zh:"åŠ "},change_lang:{en:"language",zh:"è¯­è¨€"},due_in_days:{en:"due in {0} days",zh:"è¿˜æœ‰ {0} å¤©"},due_yesterday:{en:"due yesterday",zh:"æ˜¨å¤©åˆ°æœŸ"},over_due_in_days:{en:"{0} days over due",zh:"å·²è¿‡æœŸ {0} å¤©"},due_today:{en:"due today",zh:"å°±åœ¨ä»Šå¤©"},due_tomorrow:{en:"due tomorrow",zh:"å°±åœ¨æ˜å¤©"},due_day_after_tomorrow:{en:"due day after tomorrow",zh:"åœ¨åå¤©"}},input:"",http:dt().create({baseURL:"https://cccccje.com/todo/todos/"}),light:!1,cssHref:"litera/bootstrap.min.css"}},created:async function(){console.log(`HelloWorld created() called with BACKEND = ${this.http.getUri()} `),await this.testOnline(),this.online&&this.unam&&""!==this.unam&&await this.fetchAll(),this.sync()},methods:{async testOnline(){console.log("Testing online");try{await dt()({method:"get",url:this.http.getUri(),timeout:3e3}),console.log("backend up")}catch(t){console.log(`backend down : ${t}`),this.$store.commit("setOnline",!1)}},dueString(t){let e;return String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,(function(e,n){return"undefined"!=typeof t[n]?t[n]:e}))}),e=0===t?this.d("due_today"):1===t?this.d("due_tomorrow"):2===t?this.d("due_day_after_tomorrow"):-1===t?this.d("due_yesterday"):t<-1?this.d("over_due_in_days").format(-t):this.d("due_in_days").format(t),e},toggleLight(){this.light=!this.light,this.light?this.switchToLight():this.removeLight()},switchToLight(){let t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.media="screen";let e=document.getElementsByTagName("head")[0];t.href=this.cssHref,e.appendChild(t)},removeLight(){let t=document.getElementsByTagName("link");for(let e of t){let t=e.getAttribute("href");t&&t.includes(this.cssHref)&&e.parentNode.removeChild(e)}},remove(t){this.$store.commit("removeTodo",t),this.sync()},toggleDone(t){console.log(`Toggling for ${t}`),this.$store.commit("toggleDone",t),this.sync()},addTodo(){console.log(`Adding todo ${this.input}`),this.pushTodo({name:this.input,done:!1}),this.input="",this.sync()},async fetchAll(){let t,e=this.todosArray.map((t=>t.name));console.log(`local todos: ${e}`),console.log(`fetching data for ${this.unam}`),await this.http.post("/getall/",{unam:this.unam}).then((e=>{t=e.data})).catch(ct);for(let n of t)console.log(`Got remote item {name:${n.name}, done:${n.done}}`),e.includes(n.name)||(console.log("\tAdding this"),this.pushTodo({name:n.name,done:n.done}))},async sync(){this.online?(console.log("sync called online:"),await this._sync()):console.log("sync called offline:")},async _sync(){console.log("_sync() called"),await this.http.delete("/",{data:{unam:this.unam}}).catch(ct);let t=this.todosArray.map((t=>({name:t.name,done:t.done,ddl:t.ddlString}))),e={unam:this.unam,todos:t};console.log(`the todos to post ${JSON.stringify(e)}`),await this.http.post("/postmany/",e).catch(ct)},logOut(){this.$store.commit("setUnam",""),this.todos=[]},pushTodo(t){this.$store.commit("pushTodo",t)},clearTodos(){this.$store.commit("clearTodos")},nextLang(){this.$store.commit("nextLang")},d(t){return this.dict[t][this.lang]}},computed:{unam(){return this.$store.state.unam},online(){return this.$store.state.online},todos(){return this.$store.state.todos},todosArray(){return this.$store.getters.todosArray},lang(){return this.$store.getters.lang}}};const mt=(0,i.Z)(ut,[["render",lt],["__scopeId","data-v-241d07b4"]]);var gt=mt,pt={name:"HomeView",components:{HelloWorld:gt},data(){return{unam:""}}};const ht=(0,i.Z)(pt,[["render",m]]);var _t=ht;const ft={class:"navbar navbar-expand-lg bg-secondary navbar-dark py-3 fixed-top"},bt={class:"container"},yt={href:"#",class:"navbar-brand"},wt={class:"container pt-4"},vt={class:"input-group mb-3"},kt=(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"bi bi-person-circle"})],-1),Dt={class:"input-group mb-3"},xt=(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"bi bi-lock-fill"})],-1),zt={class:"d-grid gap-2 mt-3 mx-auto d-md-flex justify-content-md-end",style:{"grid-template-columns":"repeat(3, 1fr)"}},$t=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-check"})],-1),Tt=[$t],At=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-x"})],-1),Ct=[At],Lt=(0,s._)("div",{class:"container"},[(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("div",{class:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}},[(0,s._)("span",{class:"visually-hidden"},"Loading...")])])],-1),St=[Lt];function Ht(t,e,n,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("nav",ft,[(0,s._)("div",bt,[(0,s._)("a",yt,(0,g.zw)(a.d("log_in")),1)])]),(0,s._)("section",null,[(0,s._)("div",wt,[(0,s._)("div",vt,[kt,(0,s.wy)((0,s._)("input",{type:"text",class:(0,g.C_)(["form-control",{"is-invalid":a.unamWrong}]),"onUpdate:modelValue":e[0]||(e[0]=t=>a.unam=t)},null,2),[[o.nr,a.unam]])]),(0,s._)("div",Dt,[xt,(0,s.wy)((0,s._)("input",{type:"password",class:(0,g.C_)(["form-control",{"is-invalid":a.pswdWrong}]),"onUpdate:modelValue":e[1]||(e[1]=t=>a.pswd=t)},null,2),[[o.nr,a.pswd]])]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(a.d("unam_empty")),513),[[o.F8,a.unamWrong]]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(a.d("pswd_empty")),513),[[o.F8,a.pswdWrong]]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(i.msg),513),[[o.F8,""!==i.msg]]),(0,s._)("div",zt,[(0,s._)("button",{class:"btn btn-info my-login-btn my-min-width",type:"button",onClick:e[2]||(e[2]=(...t)=>l.toSignUp&&l.toSignUp(...t))},(0,g.zw)(a.d("sign_up")),1),(0,s._)("button",{class:"btn btn-success my-login-btn my-min-width",type:"button",onClick:e[3]||(e[3]=(...t)=>l.send&&l.send(...t))},Tt),(0,s._)("button",{class:"btn btn-secondary my-login-btn my-min-width",type:"button",onClick:e[4]||(e[4]=(...t)=>a.toHome&&a.toHome(...t))},Ct)])])]),(0,s.wy)((0,s._)("section",null,St,512),[[o.F8,i.loading]])])}var Ut=n(4870),Wt=n(65);function Ot(){const t=dt().create({baseURL:"https://cccccje.com/auth/"});let e=(0,c.tv)();function n(){e.push({path:"/"})}let o=(0,Ut.iH)("aaa"),a=(0,Ut.iH)("123");const i=(0,Wt.oR)(),l=(0,s.Fl)((()=>""===o.value)),r=(0,s.Fl)((()=>""===a.value)),d=(0,s.Fl)((()=>i.state.online)),u=(0,s.Fl)((()=>i.getters.lang));return{http:t,toHome:n,unam:o,pswd:a,unamWrong:l,pswdWrong:r,online:d,lang:u}}var Et={setup(){const t={log_in:{en:"Log In",zh:"ç™»å½•"},unam_empty:{en:"Username empty",zh:"æ²¡ç»™ç”¨æˆ·å"},pswd_empty:{en:"Password empty",zh:"æ²¡ç»™å¯†ç "},sign_up:{en:"Sign Up",zh:"æ³¨å†Œ"}},{http:e,toHome:n,unam:o,pswd:s,unamWrong:a,pswdWrong:i,online:l,lang:r}=Ot();function d(e){const n=t[e][r.value];return n}return{dict:t,http:e,toHome:n,unam:o,pswd:s,unamWrong:a,pswdWrong:i,online:l,lang:r,d:d}},data(){return{loading:!1,msg:""}},created:function(){console.log(`Login created() called with BACKEND = ${this.http.getUri()} `)},methods:{toSignUp(){this.$router.push({path:"/signup"})},async send(){if(this.unamWrong)return;if(this.pswdWrong)return;let t;console.log(`Try logging in  as (${this.unam}, ${this.pswd}, ${this.lang})`),this.loading=!0,this.online?(await this.http.post("login/",{unam:this.unam,pswd:this.pswd,lang:this.lang}).then((e=>{t=e.data})).catch(ct),this.loading=!1,t.ok?(console.log(`login okay with ${this.unam}`),this.$store.commit("setUnam",this.unam),this.$router.push({path:"/"})):(console.log(`login failed with ${this.unam}`),this.msg=t.msg)):(console.log("Not online, doing a fake log in"),setTimeout((()=>{this.loading=!1,console.log("done"),this.$store.commit("setUnam",this.unam),this.$router.push({path:"/"})}),3e3))}}};const Ft=(0,i.Z)(Et,[["render",Ht]]);var Nt=Ft;const jt={class:"navbar navbar-expand-lg bg-secondary navbar-dark py-3 fixed-top"},Pt={class:"container"},Vt={href:"#",class:"navbar-brand"},Bt={class:"container pt-4"},Gt={class:"input-group mb-3"},It=(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"bi bi-person-circle"})],-1),qt={class:"input-group mb-3"},Mt=(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"bi bi-lock-fill"})],-1),Kt={class:"input-group mb-3"},Rt=(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"bi bi-lock-fill"})],-1),Zt={class:"d-grid gap-2 mt-3 mx-auto d-md-flex justify-content-md-end",style:{"grid-template-columns":"repeat(3, 1fr)"}},Yt=(0,s._)("div",null,null,-1),Jt=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-check"})],-1),Qt=[Jt],Xt=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-x"})],-1),te=[Xt],ee=(0,s._)("div",{class:"container"},[(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("div",{class:"spinner-border m-5",role:"status",style:{width:"3rem",height:"3rem"}},[(0,s._)("span",{class:"visually-hidden"},"Loading...")])])],-1),ne=[ee];function oe(t,e,n,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("nav",jt,[(0,s._)("div",Pt,[(0,s._)("a",Vt,(0,g.zw)(a.d("sign_up")),1)])]),(0,s._)("section",null,[(0,s._)("div",Bt,[(0,s._)("div",Gt,[It,(0,s.wy)((0,s._)("input",{type:"text",class:(0,g.C_)(["form-control",{"is-invalid":a.unamWrong}]),"onUpdate:modelValue":e[0]||(e[0]=t=>a.unam=t)},null,2),[[o.nr,a.unam]])]),(0,s._)("div",qt,[Mt,(0,s.wy)((0,s._)("input",{type:"password",class:(0,g.C_)(["form-control",{"is-invalid":a.pswdWrong}]),"onUpdate:modelValue":e[1]||(e[1]=t=>a.pswd=t)},null,2),[[o.nr,a.pswd]])]),(0,s._)("div",Kt,[Rt,(0,s.wy)((0,s._)("input",{type:"password",class:(0,g.C_)(["form-control",{"is-invalid":a.pswdWrong||!a.pswdSame}]),"onUpdate:modelValue":e[2]||(e[2]=t=>a.pswd2=t)},null,2),[[o.nr,a.pswd2]])]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(a.d("pswd_not_same")),513),[[o.F8,!a.pswdSame]]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(a.d("unam_empty")),513),[[o.F8,a.unamWrong]]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(a.d("pswd_empty")),513),[[o.F8,a.pswdWrong]]),(0,s.wy)((0,s._)("div",{class:"alert alert-danger",role:"alert"},(0,g.zw)(i.msg),513),[[o.F8,""!==i.msg]]),(0,s._)("div",Zt,[Yt,(0,s._)("button",{class:"btn btn-success my-login-btn my-min-width",type:"button",onClick:e[3]||(e[3]=(...t)=>l.send&&l.send(...t))},Qt),(0,s._)("button",{class:"btn btn-secondary my-login-btn my-min-width",type:"button",onClick:e[4]||(e[4]=(...t)=>a.toHome&&a.toHome(...t))},te)])])]),(0,s.wy)((0,s._)("section",null,ne,512),[[o.F8,i.loading]])])}var se={setup(){const t={sign_up:{en:"Sign Up",zh:"æ³¨å†Œ"},pswd_not_same:{en:"Two passwords are not the same",zh:"ä¿©å¯†ç ä¸ä¸€è‡´"},unam_empty:{en:"Username empty",zh:"æ²¡ç»™ç”¨æˆ·å"},pswd_empty:{en:"Password empty",zh:"æ²¡ç»™å¯†ç "}},{http:e,toHome:n,unam:o,pswd:a,unamWrong:i,pswdWrong:l,online:r,lang:d}=Ot();let c=(0,Ut.iH)("123");const u=(0,s.Fl)((()=>a.value===c.value));function m(e){return t[e][d.value]}return{dict:t,http:e,toHome:n,unam:o,pswd:a,pswd2:c,unamWrong:i,pswdWrong:l,online:r,lang:d,d:m,pswdSame:u}},data(){return{loading:!1,msg:""}},created:function(){console.log(`SignUp created() called with BACKEND = ${this.http.getUri()} `)},methods:{toSignUp(){this.$router.push({path:"/signup"})},async send(){if(!this.pswdSame)return;if(this.unamWrong)return;if(this.pswdWrong)return;let t;console.log(`Try signing up as (${this.unam}, ${this.pswd}, ${this.lang})`),this.loading=!0,this.online?(await this.http.post("signup/",{unam:this.unam,pswd:this.pswd,lang:this.lang}).then((e=>{t=e.data})).catch(ct),this.loading=!1,t.ok?(console.log(`signup okay with ${this.unam}`),this.$store.commit("setUnam",this.unam),this.$router.push({path:"/"})):(console.log(`signup failed with ${this.unam}`),this.msg=t.msg)):(console.log("Not online, doing a fake sign in"),setTimeout((()=>{this.loading=!1,console.log("done"),this.$store.commit("setUnam",this.unam),this.$router.push({path:"/"})}),3e3))}}};const ae=(0,i.Z)(se,[["render",oe]]);var ie=ae;const le={class:"navbar navbar-expand-lg bg-secondary navbar-dark py-3 fixed-top"},re={class:"container"},de={class:"navbar-brand px-3"},ce={class:"container"},ue={class:""},me={class:"row h2 mt-2"},ge={key:0,class:"position-absolute"},pe=(0,s._)("i",{class:"bi bi-square"},null,-1),he=[pe],_e={key:1,class:"position-absolute"},fe=(0,s._)("i",{class:"bi bi-check-square"},null,-1),be=[fe],ye={class:"col-10"},we={class:"row h3 mt-4"},ve=(0,s._)("div",{class:"col-2 text-center"},[(0,s._)("i",{class:"bi bi-calendar-event position-absolute"})],-1),ke={class:"col-10"},De={selected:"",value:"no_ddl"},xe={value:"today"},ze={value:"tomorrow"},$e={value:"day_after_tomorrow"},Te={value:"pick_date"},Ae={class:"row h3 mt-4"},Ce=(0,s._)("div",{class:"col-2 text-center"},null,-1),Le={class:"col-8"},Se=(0,s._)("div",{class:"col-2 text-center fs-6 d-flex align-items-center"},[(0,s._)("div",null,[(0,s._)("button",{type:"button",class:"btn-close"})])],-1),He={class:"container fixed-bottom"},Ue={class:"d-grid gap-2 mt-3 mx-auto d-md-flex justify-content-md-end mb-4",style:{"grid-template-columns":"repeat(3, 1fr)"}},We=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-trash-fill"})],-1),Oe=[We],Ee=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-check"})],-1),Fe=[Ee],Ne=(0,s._)("span",{class:"h3"},[(0,s._)("i",{class:"bi bi-x"})],-1),je=[Ne];function Pe(t,e,n,a,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("nav",le,[(0,s._)("div",re,[(0,s._)("span",de,(0,g.zw)(a.d("edit_this")),1)])]),(0,s._)("section",null,[(0,s._)("div",ce,[(0,s._)("div",ue,[(0,s._)("div",me,[(0,s._)("div",{class:"col-2 text-center",onClick:e[0]||(e[0]=t=>a.done=!a.done)},[(0,s.Wm)(o.uT,{name:"fade"},{default:(0,s.w5)((()=>[a.done?((0,s.wg)(),(0,s.iD)("span",_e,be)):((0,s.wg)(),(0,s.iD)("span",ge,he))])),_:1})]),(0,s._)("div",ye," Title of todo = "+(0,g.zw)(a.name),1)]),(0,s._)("div",we,[ve,(0,s._)("div",ke,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>a.ddl=t)},[(0,s._)("option",De,(0,g.zw)(a.d("no_ddl")),1),(0,s._)("option",xe,(0,g.zw)(a.d("today")),1),(0,s._)("option",ze,(0,g.zw)(a.d("tomorrow")),1),(0,s._)("option",$e,(0,g.zw)(a.d("day_after_tomorrow")),1),(0,s._)("option",Te,(0,g.zw)(a.d("pick_date")),1)],512),[[o.bM,a.ddl]])])]),(0,s.wy)((0,s._)("div",Ae,[Ce,(0,s._)("div",Le,[(0,s.wy)((0,s._)("input",{type:"date",id:"start",name:"trip-start","onUpdate:modelValue":e[2]||(e[2]=t=>a.customDate=t),class:"form-control",min:"2018-01-01",max:"2022-12-31"},null,512),[[o.nr,a.customDate]])]),Se],512),[[o.F8,"pick_date"==a.ddl]])])])]),(0,s._)("section",null,[(0,s._)("div",He,[(0,s._)("div",Ue,[(0,s._)("button",{class:"btn btn-danger my-min-width",type:"button",onClick:e[3]||(e[3]=(...t)=>a.deleteAndGoHome&&a.deleteAndGoHome(...t))},Oe),(0,s._)("button",{class:"btn btn-success my-min-width",type:"button",onClick:e[4]||(e[4]=(...t)=>a.updateAndGoHome&&a.updateAndGoHome(...t))},Fe),(0,s._)("button",{class:"btn btn-secondary my-min-width",type:"button",onClick:e[5]||(e[5]=(...t)=>a.toHome&&a.toHome(...t))},je)])])])])}n(1703);const Ve=864e5;function Be(t,e){const n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),o=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((o-n)/Ve)}function Ge(t,e=!1,n){let o={name:t,done:e};return n&&(o.ddl=n,Object.defineProperties(o,{ddlString:{get(){return this.ddl.toISOString().substring(0,10)}},dueInDays:{get(){return Be(new Date,this.ddl)}}})),o}function Ie(t,e){let n=new Date(t).toDateString(),o=new Date(e).toDateString();return n===o}function qe(t,e=1){let n=new Date(t);return n.setDate(t.getDate()+e),n}function Me(t){let e=new Date;return Ie(e,t)}function Ke(t){let e=new Date;return Ie(qe(e),t)}function Re(t){let e=new Date;return Ie(qe(e,2),t)}var Ze={name:"DetailView",created(){let{id:t}=this.$route.params;t=Number(t),console.log(`detail view called with id = ${t}`),this.id=t;let e=this.$store.state.todos.get(t);if(this.name=e.name,this.done=e.done,e?.ddl){let t=e.ddl;Me(t)?this.ddl="today":Ke(t)?this.ddl="tomorrow":Re(t)?this.ddl="day_after_tomorrow":(this.ddl="pick_date",this.customDate=e.ddlString)}},setup(){const t={edit_this:{en:"Edit this item",zh:"ç¼–è¾‘è¿™ä»¶äº‹"},today:{en:"Today",zh:"ä»Šå¤©"},tomorrow:{en:"Tomorrow",zh:"æ˜å¤©"},day_after_tomorrow:{en:"Day After Tomorrow",zh:"åå¤©"},pick_date:{en:"Pick a Date",zh:"é€‰ä¸€å¤©"},no_ddl:{en:"No Deadline",zh:"æ²¡æœŸé™"}};let e=(0,Ut.iH)(0),n=(0,Ut.iH)(!0),o=(0,Ut.iH)(""),a=(0,Ut.iH)("no_ddl"),i=(0,Ut.iH)("");const l=(0,s.Fl)((()=>{let t={name:o.value,done:n.value};if("no_ddl"===a.value)return t;console.log("Adding ddl");let e=new Date;switch(a.value){case"today":break;case"tomorrow":e.setDate(e.getDate()+1);break;case"day_after_tomorrow":e.setDate(e.getDate()+2);break;case"pick_date":e=new Date(i.value);break;default:throw new Error("unknown key")}return t=Ge(o.value,n.value,e),console.log(`todo to be submitted is ${JSON.stringify(t)}`),t}));(0,s.YP)(a,(t=>{console.log(`ddl now: ${t}`)})),(0,s.YP)(i,(t=>{console.log(`customDate now: ${t}`)}));let r=(0,Wt.oR)();function d(){console.log(`Removing todo ${e.value}`),r.commit("removeTodo",e.value),m()}function c(){let t=l.value;t._id=e.value,console.log(`Updating todo ${e.value} with ${JSON.stringify(t)}`),console.log(`the ddlString is ${t.ddlString}`),r.commit("updateTodo",t),m()}const{lang:u,toHome:m}=Ot();function g(e){const n=t[e][u.value];return n}return{id:e,done:n,name:o,ddl:a,todoToSubmit:l,customDate:i,deleteAndGoHome:d,updateAndGoHome:c,lang:u,d:g,toHome:m}}};const Ye=(0,i.Z)(Ze,[["render",Pe]]);var Je=Ye;const Qe=[{path:"/",name:"home",component:_t},{path:"/login",name:"login",component:Nt},{path:"/signup",name:"signup",component:ie},{path:"/detail/:id",name:"detail",component:Je},{path:"/about",name:"about",component:()=>n.e(443).then(n.bind(n,7201))}],Xe=(0,c.p7)({history:(0,c.r5)(),routes:Qe});var tn=Xe,en=(0,Wt.MT)({state:{unam:"",online:!1,todos:new Map,lang_id:0,AVAILABLE_LANG:["zh","en"],todo_id:0},getters:{lang(t){return t.AVAILABLE_LANG[t.lang_id]},todosArray(t){return[...t.todos.values()]}},mutations:{nextLang(t){t.lang_id++,t.lang_id%=t.AVAILABLE_LANG.length,document.documentElement.lang=t.AVAILABLE_LANG[t.lang_id]},setUnam(t,e){t.unam=e},setOnline(t,e){t.online=e},clearTodos(t){t.todos.clear(),t.todo_id=0},pushTodo(t,e){let n=t.todo_id++;Object.defineProperty(e,"_id",{value:n,writable:!0,enumerable:!1,configurable:!1}),t.todos.set(n,e)},updateTodo(t,e){if(!t.todos.has(e._id))throw new Error(`Updating an non-existing id = ${e._id}`);t.todos.set(e._id,e)},removeTodo(t,e){console.log(`Removing item ${t.todos.get(e).name}`),t.todos.delete(e)},toggleDone(t,e){let n=t.todos;if(n.has(e)){let n=t.todos.get(e);n.done=!n.done,t.todos.set(e,n)}}},actions:{},modules:{}});document.documentElement.lang=en.getters.lang,(0,o.ri)(d).use(en).use(tn).mount("#app")}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,s,a){if(!o){var i=1/0;for(c=0;c<t.length;c++){o=t[c][0],s=t[c][1],a=t[c][2];for(var l=!0,r=0;r<o.length;r++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[r])}))?o.splice(r--,1):(l=!1,a<i&&(i=a));if(l){t.splice(c--,1);var d=s();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[o,s,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/about.6dbebe3f.js"}}(),function(){n.miniCssF=function(t){return"css/about.2547d8a7.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="hi:";n.l=function(o,s,a,i){if(t[o])t[o].push(s);else{var l,r;if(void 0!==a)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==e+a){l=u;break}}l||(r=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",e+a),l.src=o),t[o]=[s];var m=function(e,n){l.onerror=l.onload=null,clearTimeout(g);var s=t[o];if(delete t[o],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach((function(t){return t(n)})),e)return e(n)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),r&&document.head.appendChild(l)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t=function(t,e,n,o){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var a=function(a){if(s.onerror=s.onload=null,"load"===a.type)n();else{var i=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.href||e,r=new Error("Loading CSS chunk "+t+" failed.\n("+l+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=i,r.request=l,s.parentNode.removeChild(s),o(r)}};return s.onerror=s.onload=a,s.href=e,document.head.appendChild(s),s},e=function(t,e){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var s=n[o],a=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===t||a===e))return s}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){s=i[o],a=s.getAttribute("data-href");if(a===t||a===e)return s}},o=function(o){return new Promise((function(s,a){var i=n.miniCssF(o),l=n.p+i;if(e(i,l))return s();t(o,l,s,a)}))},s={143:0};n.f.miniCss=function(t,e){var n={443:1};s[t]?e.push(s[t]):0!==s[t]&&n[t]&&e.push(s[t]=o(t).then((function(){s[t]=0}),(function(e){throw delete s[t],e})))}}(),function(){var t={143:0};n.f.j=function(e,o){var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)o.push(s[2]);else{var a=new Promise((function(n,o){s=t[e]=[n,o]}));o.push(s[2]=a);var i=n.p+n.u(e),l=new Error,r=function(o){if(n.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,s[1](l)}};n.l(i,r,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,a,i=o[0],l=o[1],r=o[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(r)var c=r(n)}for(e&&e(o);d<i.length;d++)a=i[d],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},o=self["webpackChunkhi"]=self["webpackChunkhi"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7743)}));o=n.O(o)})();
//# sourceMappingURL=app.1c40484c.js.map